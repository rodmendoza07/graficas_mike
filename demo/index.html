<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<script type="text/javascript" src="amcharts/amcharts/amcharts.js"></script>
	<script type="text/javascript" src="amcharts/amcharts/serial.js"></script>
	<title>[Graficas_mike]</title>
	
</head>
<body>
	<div class="container-fluid">
		<div class="row">
			<div class="col-md-12" id="graphContent" style="margin-top: 25px;">
					
			</div>
		</div>
	</div>
    <script>
        var ajaxF = $.ajax({
            url: "include/demo.php",
            type: "GET",
            datatype:"text",
            async: false,
            success: function(data){
                var number = "000000";
                var numberInt = parseInt(number, 16);
                var datos = data.split(",");
                var graphData = [];
                for (var i = 0; i < datos.length; i++) {
                    numberInt = numberInt + i + 160;
                    var color = numberInt.toString(16);
                    var elements = datos[i].split("|");
                    graphData.push(JSON.parse('{"resultado": "' + elements[0] + '", "promedio": ' + elements[1]+ ',"color": "#' + color + '"}'));
                }
                AmCharts.ready(function () {
                    // SERIAL CHART

                    chart = new AmCharts.AmSerialChart();
                    chart.dataProvider = graphData;
                    chart.categoryField = "resultado";
                    // the following two lines makes chart 3D
                    chart.depth3D = 20;
                    chart.angle = 30;
                    // AXES
                    // category
                    var categoryAxis = chart.categoryAxis;
                    categoryAxis.labelRotation = 90;
                    categoryAxis.dashLength = 5;
                    categoryAxis.gridPosition = "start";

                    // value
                    var valueAxis = new AmCharts.ValueAxis();
                    valueAxis.title = "Promedio";
                    valueAxis.dashLength = 5;
                    chart.addValueAxis(valueAxis);

                    // GRAPH
                    var graph = new AmCharts.AmGraph();
                    graph.valueField = "promedio";
                    graph.colorField = "color";
                    graph.balloonText = "<span style='font-size:14px'>[[category]]: <b>[[value]]</b></span>";
                    graph.type = "column";
                    graph.lineAlpha = 0;
                    graph.fillAlphas = 1;
                    chart.addGraph(graph);

                    // CURSOR
                    var chartCursor = new AmCharts.ChartCursor();
                    chartCursor.cursorAlpha = 0;
                    chartCursor.zoomable = false;
                    chartCursor.categoryBalloonEnabled = false;
                    chart.addChartCursor(chartCursor);

                    chart.creditsPosition = "top-right";


                    // WRITE
                    chart.write("graficas");
                });
                $("#graphContent").empty();   
                $("#graphContent").append('<div id="graficas" style="width: 100%; height: 400px;"></div>');
            }
        });
    </script>
</body>
</html>